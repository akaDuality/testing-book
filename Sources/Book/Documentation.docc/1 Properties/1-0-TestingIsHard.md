# Тестировать — сложно

Будем честны: тестировать сложно. Нужно написать основной код (правильно), написать тесты (тоже правильно) и тогда все система будет работать (возможно, правильно). Разберем откуда появляются сложности, чтобы понимать как их контролировать

## С тестами больше кода

### Сложно понимать
С тестами кода становится больше, при этом надо думать сразу о нескольких вещах:
- Правильно ли написан тест
- Правильно ли написан код
- В случае ошибки: она в тесте или коде? Иногда даже запускаешь приложение, чтобы убедиться, что код то правильный. 

> Note: с тестами вы пишите лучший код, потому что иначе это говно даже протестировать не получится!

### Объем поддержки

> Не бойтесь выкидывать лишние юнит-тесты: они должны помогать в написании кода, а потом они не особо нужны.

## Тесты ломаются от изменений кода

Тесты должна ломаться от двух вещей: 
- Изменение сценария
- Изменение поведения зависимости. 

Вот через них и тестируйте. 

> Note: пиши более интеграционные тесты и хороший DSL, тогда изменения будут точечными

### Пишите снепшот-тесты

Снепшот-тесты это просто рентгеновский снимок того как работает приложение. Если тест упал, то достаточно просто удалить пример и прогнать еще раз — разницу увидите уже на уровне гита и пулл-реквеста. Если вам результат не подходит — меняйте код по сценарию. В итоге тесты много не просят, а результат изменений показывают. 

### Много фреймворков и подходов, под разные задачи разные

Юниты, Снепшоты, скриншоты, сценарии, UI-тесты. 

### Нужно менять код для тестирования

### Непонятные причины падения

В тестах на сценарии может быть непонятно почему тест упал. В этот момент вы должны открывать логи и по ним смотреть что не получилось. 

> Tip: IssueReporting + BlackBox покажут на место ошибки.

### Тесты это подготовка к мониторингу. 

А вот тут прям интересно: 

## На тесты нужно время

> Note: время запуска поможет сэкономить, но суммарный выигрыш сложно посчитать. 

### Культура разработки

Задача любого менеджера — построить эффективный процесс регулярной поставки фич на прод. Этот процесс состоит из ресерча, дизайна, кодинга,  тестирования и мониторинга, а не только из кода. С этой стороны автотестирования оптимизирует весь процесс разработки: старые требования записаны в тестах, проще менять код, быстрее тестировать регрессионно, безопасней релизить. Одни плюсы. 

Но если «менеджер» оптимизирует только поставку ценности в текущем спринте, то это странный менеджер. Даже стартапу тесты могут пригодиться за первые 3 месяца предрелизной подготовки. 

## Цель книги — показать примеры

При внедрении тестов я столкнулся с самой важной проблемой: я не понимаю что мне надо сделать. Нужно написать какие-то тесты и разобраться какие они должны быть, нужно как-то изменить привычки в коде, нужно использовать такую архитектуру, которая бы упростила написание тестов. Слишком много задач, а ведь мы еще даже не начали решать что там бизнес просил. 

Поэтому главная цель книги — показать как оно там в протестированных системах, чтобы можно было разобраться какое конечное состояние нам нужно, а уже вы сможете придумать как вам удобно к этому состоянию прийти.  

> Tip: я покажу много примеров, чтобы было понятно куда идти. Путь вам нужно будет пройти самим.
